<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Demo Pagamenti: PayPal & Stripe</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Stripe.js -->
  <script src="https://js.stripe.com/v3/"></script>
  <!-- PayPal SDK (usa "sb" per sandbox) -->
  <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=EUR"></script>
</head>
<body>
  <div class="container mt-5">
    <h1 class="mb-4">Demo Pagamenti: PayPal & Stripe</h1>
    <div class="row">
      <!-- Sezione PayPal -->
      <div class="col-md-6">
        <h3>PayPal</h3>
        <div id="paypal-button-container"></div>
      </div>
      <!-- Sezione Stripe -->
      <div class="col-md-6">
        <h3>Stripe</h3>
        <form id="stripe-payment-form">
          <div class="mb-3">
            <label for="card-element" class="form-label">Dettagli della carta</label>
            <div id="card-element" class="form-control">
              <!-- Stripe Elements inserirÃ  qui il form della carta -->
            </div>
            <div id="card-errors" role="alert" class="text-danger mt-2"></div>
          </div>
          <button type="submit" class="btn btn-primary">Paga con Stripe</button>
        </form>
      </div>
    </div>
  </div>
  
  <!-- Bootstrap JS Bundle (include Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // Integrazione PayPal
    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: { value: '10.00' } // Importo in EUR
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert('Transazione completata da ' + details.payer.name.given_name);
        });
      }
    }).render('#paypal-button-container');
    
    // Integrazione Stripe
    // Nota: Senza backend non puoi creare un PaymentIntent, ma questo esempio mostra come ottenere un token dalla carta.
    const stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx'); // Sostituisci con la tua chiave pubblica test
    const elements = stripe.elements();
    const cardElement = elements.create('card');
    cardElement.mount('#card-element');
    
    const form = document.getElementById('stripe-payment-form');
    form.addEventListener('submit', function(event) {
      event.preventDefault();
      stripe.createToken(cardElement).then(function(result) {
        if (result.error) {
          document.getElementById('card-errors').textContent = result.error.message;
        } else {
          // In un ambiente con backend invieresti il token al server per completare il pagamento
          alert('Token creato: ' + result.token.id);
        }
      });
    });
  </script>
</body>
</html>
